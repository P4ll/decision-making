# Задание 1. Формализация ПДД

## Требования
Необходимо формализовать модель правил дорожного движения для их последующего использования.
То есть должен быть набор правил, с помощью которых можно будет двигаться по ДОПам на автомобиле.

## Реализация
Если нет препятствий, то продолжаем движение с мин(разрешенная скорость; скорость, на которой гарантируется сохранение свойств управляемости транспорта).

Препятствиями могут являться: другие ТС, пешеходы, прочие объекты, если они мешают движению ТС.


### Термины (объекты, взаимодействующие друг с другом)

На дорогах могут присутствовать только субъекты (С) и объекты (О).
Субъектами являются: водители ТС (В) и пешеходы (П).
Объектами являются: дорожные знаки, вертикальная и горизонтальная разметка, проезжая часть, светофор...
Дорожные знаки могут быть: запрещающие, предписывающие, сервиса, предупреждающие...
Дорожная разметка может быть: сплошная, штриховая.
Перекресток может быть: регулируемый, нерегулируемый.
Регулировщиком может быть: сотрудник полиции или светофор.
Зона может быть: проезжей частью, прилежащей...
Движение может быть: разрешено, запрещено.
Препятствиями могут являться: ТС, пешеходы...
Скорость движения может быть: 0..139.
Тип движения: вперед, назад, маневр.
Маневр: поворот налево, направо, разворот, обгон, перестроение.
Светофор может быть с отдельной секцией для направления движения или без дополнительной секции.

### Правила взаимодействия

#### Общие правила движения

1. Если зона является проезжей частью, то движение по ней разрешено.
2. Если зона является прилежащей частью, то движение по ней разрешено.
3. Если зона не является проезжей или прилежащей, то движение по ней запрещено.
4. Если на пути следования нет препятствий, то движение разрешено.
5. Если на пути следования есть препятствия, то движение запрещено.
6. Скорость движения выбирается как min(максимальная разрешенная скорость на участке; максимальная скорость, при которой сохраняется управляемость).
7. 

#### Правила проезда перекрестков

1. Если перекресток регулируется светофором, и он светит зеленым, то можно продолжать движение.
2. Если перекресток регулируется светофором, и он светит желтым, то необходимо прекратить движение.
3. Если перекресток регулируется светофором, и он светит красным, то необходимо прекратить движение.
4. Если перекресток нерегулируемый, 

#### Правила обгона

Обгон разрешён,
если:
    1) отсутствует знак "обгон запрещен";
    2) ваш ТС =не обгоняет другой ТС;
    3) разметка на проезжей части не является сплошной;
    4) до пешеходного перехода ещё n метров;
    5) до ЖД переезда ещё k метров;
    6) ТС не двигается по ... (нерегулируемый перекресток, второстепенная...)

#### Правила стоянки
ТС может быть поставлен на стоянку в данном месте,
если:
    1) отсутствует запрещающий знак;
    2) до ближайшего пешеходного перехода 5 метров;
    3) до ЖД переезда {} метров;

#### Правила парковки
ТС может быть припаркован,
если:
    1) отсутствует запрещающий знак;
    2) до пешеходного перехода 5 метров;
    3) до ...

#### Правила перехода пешеходного перехода

1. Если переход регулируется светофором, то пешеход ждёт зеленого сигнала, а затем переходит.
2. Если переход не регулируется светофором, то пешеход переходит сразу, как только будет возможность.

#### Правила проезда ЖД переездов

# Алгоритм

Есть очередь событий Q, откуда, пока очередь не пуста, каждый квант времени выбирается событие si. Событие - есть (входные условия или внешняя информация, цель объекта).
Далее идет [событие] -> обработчик события (что делать субъекту для его преодоления) для каждого субъекта.
Для упрощения принимается, что во время принятия решения на очередном событии, события до того были обработаны верно.

# Константы

Разрешающий светофор = зелёный.
Запрещающий светофор = красный или желтый.

| #   | Положение                     | Разрешающее направление |
| --- | ---                           | ---                     |
| 1   | ![Положение 1](pics/reg1.png) |                         |
| 2   | ![Положение 2](pics/reg2.png) | прямо, направо          |
| 3   | ![Положение 3](pics/reg3.png) |                         |
| 4   | ![Положение 4](pics/reg4.png) |                         |
| 5   | ![Положение 5](pics/reg5.png) | все направления         |
| 6   | ![Положение 6](pics/reg6.png) |                         |
| 7   | ![Положение 7](pics/reg7.png) | направо                 |
| 8   | ![Положение 8](pics/reg8.png) |                         |

| #   | Знаки                                                    | Разрешающее направление |
| --- | ---                                                      | ---                     |
| 1   | ![](pics/sig1.png) ![](pics/sig4.png) ![](pics/sig5.png) | прямо                   |
| 2   | ![](pics/sig2.png) ![](pics/sig4.png) ![](pics/sig6.png) | направо                 |
| 3   | ![](pics/sig3.png) ![](pics/sig5.png) ![](pics/sig6.png) | налево                  |
| 4   | все, разрешающие налево                                  | разворот                |

## ТС

### Проезд перекрестков

[регулируемый светофором, разрешающий цвет, разрешающий знак] -> движение в разрешенном направлении.

[регулировщик, разрешенное направление] -> движение в разрешенном направлении.

[нерегулируемый, разрешающий знак] -> движение в разрешенном направлении.

### Обгон

[предпологаемая полоса обгона пуста, разрешающая разметка, обгоняемый ТС не совершает обгон, нет запрещающих знаков, ТС двигается не по пешеходному переходу, ТС не в конце подъема с ограниченной видемостью, ТС не на мосту, путепроводе, эстакаде, до ЖД переезда >= 100 м] -> совершение обгона.

### Опережение

[выбранная полоса свободна, ТС в других полосах не замедляют ход перед пешеходным переходом] -> опережение ТС по выбранной полосе.

### Остановка



### Стоянка

### Проезд пешеходных переходов

### Движение в жилых зонах

### Буксировка

### Проезд ЖД путей

### Проезд мест остановки общественного транспорта

## Пешеход

Переход проезжей части

Движение в жилых зонах
